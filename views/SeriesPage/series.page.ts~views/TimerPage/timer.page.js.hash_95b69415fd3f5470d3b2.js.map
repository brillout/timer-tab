{"version":3,"sources":["webpack:///./tab-utils/pretty_scroll_area.js","webpack:///./tab-utils/views/FullViewWrapper/screen-buttons.js","webpack:///./tab-utils/views/FullViewWrapper/on_page_load.js","webpack:///./tab-utils/views/FullViewWrapper/index.js","webpack:///./tab-utils/views/common/show_toast.js","webpack:///./tab-utils/make_element_zoomable.js"],"names":["pretty_scroll_area","scroll_el","hide_scroll_state","is_on_hide_scroll_element","enable_scroll_auto_hide","scrollbar_width_computed","onStateChange","hide_scroll","classList","initialized","s1","document","querySelectorAll","s2","s3","assert","usage","length","scroll_bar_width","hide_scroll_element","el","outer","createElement","style","position","visibility","zIndex","overflow","container","body","appendChild","inner","scrollbarWidth","offsetWidth","removeChild","get_scroll_bar_width","documentElement","setProperty","addScrollListener","scroll_pos","positionTop","getElementScrollPos","distance","Math","abs","fireInitialScroll","setTimeout","isAutoScrolling","scrollListeners","scrollListener","onlyUserScroll","push","add_global_scroll_listener","getScroll","already_listening","window","addEventListener","forEach","is_user_scroll","passive","on_resize","scrollToHideScrollElement","smooth","scrollTop","setScroll","newTop","jumpTo","slideTo","top","smoothStep","n","promise","Promise","resolve","resolvePromise","currentTop","counter","timer","setInterval","clearInterval","requestAnimationFrame","scrollToElement","selector_or_element","pos","constructor","String","querySelector","getBoundingClientRect","Number","scrollLeft","positionLeft","left","activate_screen_buttons","scroll_button","fullscreen_button","full_view","onclick","do_scroll","stop_auto_scroll","repeater","scroll_button_text","start_auto_scroll","show","auto_duration","time_step","internal","hide","clearTimeout","set","textContent","hidden","scrollPos","fullscreenElement","exitFullscreen","activate_auto_scroll","requestFullscreen","show_toast","is_error","short_duration","activate_view_buttons","open","toggle_zoom","on_page_load","onPageLoad","goldpage_args","load_full_view","load_common","FullViewLayout","props","id","FullView","children","Header","className","ScreenButton","click-name","LeftSide","RightSide","MorePanel","Footer","config","conf","renderToDom","renderToHtml","favicon","tab_app_logo","text","backgroundColor","duration","Toastify","showToast","_toggle_zoom","is_zoomed","make_element_zoomable","last_size","containerEl","scaleEl","zoomEl","toggleEl","add","ev","propertyName","on_transition_start","remove","last_state","on_zoom_end_listeners","listener","auto_scroll","x","y","size","innerWidth","innerHeight","set_zoom","getElementSizes","zoom_el_height","height","zoom_el_width","width","container_height","container_width","log_data","scale_el_pos__absolute","getPosition","zoom_el_pos__absolute","zoom_el_pos__relative","zoom_el_pos","scale","min","screen_center","zoom_el_center","translation","zoomIn","zoomOut","track_event","name","on_zoom_end","getSize","styleProp","computed_style","get_computed_style","parseInt","defaultView","getComputedStyle","getPropertyValue","getOuterSize","d","map","di","reduce","i1","i2","current_el","offsetLeft","offsetTop","offsetParent"],"mappings":"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","file":"views/SeriesPage/series.page.ts~views/TimerPage/timer.page.js.hash_95b69415fd3f5470d3b2.js","sourcesContent":["import \"./private/pretty_scroll_area.css\";\nimport assert from \"@brillout/assert\";\n\nexport default pretty_scroll_area;\n\nexport {\n  getScroll,\n  setScroll,\n  scrollToElement,\n  scrollToHideScrollElement,\n  /*\n  isScrolledToHideScrollElement,\n  */\n\n  addScrollListener,\n  removeScrollListener,\n  getElementScrollPos,\n};\n\n/*\nconst DISABLE = true;\n/*/\nconst DISABLE = false;\n//*/\n\nlet scroll_el;\n\nconst hide_scroll_state = {\n  is_on_hide_scroll_element: null,\n  enable_scroll_auto_hide: null,\n  scrollbar_width_computed: null,\n};\nfunction onStateChange() {\n  const hide_scroll =\n    hide_scroll_state.is_on_hide_scroll_element &&\n    hide_scroll_state.enable_scroll_auto_hide &&\n    hide_scroll_state.scrollbar_width_computed;\n  if (DISABLE) {\n    return;\n  }\n  scroll_el.classList[hide_scroll ? \"add\" : \"remove\"](\"hide_scroll\");\n}\n\nlet initialized = false;\nfunction pretty_scroll_area() {\n  if (initialized) return;\n  initialized = true;\n\n  const s1 = document.querySelectorAll(\".pretty_scroll_area\");\n  const s2 = document.querySelectorAll(\".pretty_scroll_area__parent\");\n  const s3 = document.querySelectorAll(\n    \".pretty_scroll_area__hide_scroll_element\"\n  );\n  assert.usage(s1.length === 1 && s2.length === 1 && s3.length === 1);\n  scroll_el = s1[0];\n  const hide_scroll_element = s3[0];\n\n  compute_scrollbar_width();\n  hide_scroll_state.scrollbar_width_computed = true;\n  onStateChange();\n\n  addScrollListener(\n    (scroll_pos) => {\n      const { positionTop } = getElementScrollPos(hide_scroll_element);\n      // assert.log({positionTop, scroll_pos});\n      const distance = Math.abs(scroll_pos - positionTop);\n      hide_scroll_state.is_on_hide_scroll_element = distance <= 1;\n      onStateChange();\n    },\n    { fireInitialScroll: true }\n  );\n\n  setTimeout(() => {\n    hide_scroll_state.enable_scroll_auto_hide = true;\n    onStateChange();\n  }, 2000);\n}\n\nconst scrollListeners = [];\nvar isAutoScrolling;\nfunction addScrollListener(\n  scrollListener,\n  { onlyUserScroll = false, fireInitialScroll = false } = {}\n) {\n  scrollListener.onlyUserScroll = onlyUserScroll;\n  scrollListeners.push(scrollListener);\n  add_global_scroll_listener();\n  if (fireInitialScroll) {\n    const scroll_pos = getScroll();\n    scrollListener(scroll_pos);\n  }\n}\nfunction removeScrollListener(scrollListener) {\n  const idx = scrollListeners.indexOf(scrollListener);\n  if (idx !== -1) {\n    scrollListeners.splice(idx, 1);\n  }\n}\nlet already_listening = false;\nfunction add_global_scroll_listener() {\n  if (already_listening) return;\n  pretty_scroll_area();\n  already_listening = true;\n  const scroll_event_el =\n    scroll_el === document.documentElement ? window : scroll_el;\n  scroll_event_el.addEventListener(\n    \"scroll\",\n    () => {\n      const scroll_pos = getScroll();\n      scrollListeners.forEach((scrollListener) => {\n        if (scrollListener.onlyUserScroll && isAutoScrolling) {\n          return;\n        }\n        scrollListener(scroll_pos, { is_user_scroll: !isAutoScrolling });\n      });\n    },\n    { passive: true }\n  );\n  window.addEventListener(\"resize\", on_resize, { passive: true });\n}\n\nfunction on_resize() {\n  scrollToHideScrollElement({ smooth: false });\n}\n\nfunction getScroll() {\n  return scroll_el.scrollTop;\n}\nasync function setScroll(newTop, { smooth = false } = {}) {\n  if (!smooth) {\n    return jumpTo(newTop);\n  } else {\n    return slideTo(newTop);\n  }\n}\n\nfunction jumpTo(newTop) {\n  scroll_el.scrollTop = newTop;\n}\n\nasync function slideTo(top) {\n  /*\n  const STEPS = 30;\n  const INTERVAL = 10;\n  /*/\n  const STEPS = 30;\n  const INTERVAL = 20;\n  //*/\n\n  let resolvePromise;\n  const promise = new Promise((resolve) => (resolvePromise = resolve));\n\n  const currentTop = getScroll();\n  const distance = top - currentTop;\n\n  isAutoScrolling = true;\n  let counter = 0;\n  var timer = setInterval(function () {\n    jumpTo(currentTop + distance * smoothStep(counter++ / STEPS));\n    if (counter > STEPS) {\n      clearInterval(timer);\n      window.requestAnimationFrame(() => {\n        isAutoScrolling = false;\n      });\n      resolvePromise();\n    }\n  }, INTERVAL);\n\n  return promise;\n\n  function smoothStep(n) {\n    return n * n * (3 - 2 * n);\n  }\n}\n\nfunction scrollToElement(selector_or_element, { smooth = true } = {}) {\n  const { positionTop } = getElementScrollPos(selector_or_element);\n  return setScroll(positionTop, { smooth });\n}\n\nfunction getElementScrollPos(selector_or_element) {\n  const element =\n    selector_or_element.constructor === String\n      ? document.querySelector(selector_or_element)\n      : selector_or_element;\n\n  const pos = element.getBoundingClientRect();\n\n  const positionTop = pos.top + getScroll();\n  assert(positionTop.constructor === Number);\n\n  const { scrollLeft } = scroll_el;\n  assert(scrollLeft.constructor === Number);\n  const positionLeft = pos.left + scrollLeft;\n  assert(positionLeft.constructor === Number);\n\n  return { positionTop, positionLeft };\n}\n\nfunction scrollToHideScrollElement({ smooth = true } = {}) {\n  const s3 = document.querySelectorAll(\n    \".pretty_scroll_area__hide_scroll_element\"\n  );\n  assert.usage(\n    s3.length === 1,\n    \"Number of `.pretty_scroll_area__hide_scroll_element` elements: \" +\n      s3.length\n  );\n\n  const hide_scroll_element = s3[0];\n\n  scrollToElement(hide_scroll_element, { smooth });\n}\n/*\nfunction isScrolledToHideScrollElement() {\n  return !!hide_scroll_state.is_on_hide_scroll_element;\n}\n*/\n\nfunction compute_scrollbar_width() {\n  const scroll_bar_width = get_scroll_bar_width();\n  document.documentElement.style.setProperty(\n    \"--scroll-bar-width\",\n    scroll_bar_width + \"px\"\n  );\n}\nfunction get_scroll_bar_width() {\n  // Creating invisible container\n  const outer = document.createElement(\"div\");\n  hide_el(outer);\n  outer.style.overflow = \"scroll\"; // forcing scrollbar to appear\n  const container = document.body;\n\n  container.appendChild(outer);\n\n  const inner = document.createElement(\"div\");\n  outer.appendChild(inner);\n  const scrollbarWidth = outer.offsetWidth - inner.offsetWidth;\n\n  container.removeChild(outer);\n\n  return scrollbarWidth;\n\n  function hide_el(el) {\n    el.style.position = \"absolute\";\n    el.style.visibility = \"hidden\";\n    el.style.zIndex = \"-9999\";\n  }\n}\n","import assert from \"@brillout/assert\";\nimport { scrollToElement, addScrollListener } from \"../../pretty_scroll_area\";\nimport { show_toast } from \"../common/show_toast\";\nimport { toggle_zoom } from \"../../make_element_zoomable\";\n\nexport { activate_screen_buttons };\n\nfunction activate_screen_buttons() {\n  activate_view_buttons();\n  activate_settings_button();\n  activate_donate_button();\n  activate_thanks_button();\n  activate_zoom_button();\n}\n\nfunction activate_zoom_button() {\n  const zoom_button = document.querySelector(\"#zoom-button\");\n  zoom_button.onclick = () => {\n    toggle_zoom();\n  };\n}\n\nfunction activate_settings_button() {\n  const settings_button = document.querySelector(\"#settings-button\");\n  settings_button.onclick = () => {\n    scrollToElement(\"#more_panel\");\n  };\n}\n\nfunction activate_donate_button() {\n  const donate_button = document.querySelector(\"#donate-button\");\n  donate_button.onclick = () => {\n    window.open(\"/donate\", \"_self\");\n  };\n}\n\nfunction activate_thanks_button() {\n  const thanks_button = document.querySelector(\"#thanks-button\");\n  thanks_button.onclick = () => {\n    window.open(\"/thanks\", \"_self\");\n  };\n}\n\nfunction activate_view_buttons() {\n  const scroll_button = document.querySelector(\"#center-button\");\n  const fullscreen_button = document.querySelector(\"#fullscreen-button\");\n  const full_view = document.querySelector(\n    \".pretty_scroll_area__hide_scroll_element\"\n  );\n\n  scroll_button.onclick = do_scroll;\n  fullscreen_button.onclick = do_fullscreen;\n\n  const stop_auto_scroll = activate_auto_scroll({ do_scroll });\n\n  return;\n\n  async function do_scroll() {\n    stop_auto_scroll();\n    await scrollToElement(full_view);\n  }\n  async function do_fullscreen() {\n    try {\n      await document.documentElement.requestFullscreen();\n    } catch (err) {\n      show_toast(\"Your browser doesn't support fullscreen.\", {\n        is_error: true,\n        short_duration: true,\n      });\n      return;\n    }\n    // When tab goes to fullscreen, scroll is changed; ensure with `requestAnimationFrame` that\n    // scrolling happens *after* the tab goes fullscreen.\n    requestAnimationFrame(async () => {\n      await do_scroll();\n    });\n  }\n}\n\n/*/\nlet auto_duration = 1000;\n/*/\nlet auto_duration = 4;\n//*/\nfunction activate_auto_scroll({ do_scroll }) {\n  const scroll_button = document.querySelector(\"#center-button\");\n  const scroll_button_text = scroll_button.querySelector(\".button-text\");\n  const active_class = \"auto-scroll-is-active\";\n\n  addScrollListener(scrollListener, {\n    onlyUserScroll: false,\n    fireInitialScroll: false,\n  });\n  start_auto_scroll();\n\n  return stop_auto_scroll;\n\n  var counter;\n  var repeater;\n  function start_auto_scroll() {\n    show();\n    if (repeater) return;\n    counter = auto_duration;\n    auto_duration = 10;\n    time_step();\n    assert.internal(repeater);\n  }\n  function stop_auto_scroll() {\n    hide();\n    if (repeater) {\n      window.clearTimeout(repeater);\n      repeater = null;\n    }\n  }\n\n  function set(hide = false) {\n    scroll_button.classList[hide ? \"remove\" : \"add\"](active_class);\n    scroll_button_text.textContent = hide ? \"\" : \" \" + (counter | 0) + \"s\";\n  }\n  function show() {\n    set();\n  }\n  function hide() {\n    set(true);\n  }\n\n  function time_step() {\n    assert(counter >= 0);\n\n    if (!document.hidden) {\n      counter--;\n      if ((counter | 0) === counter) {\n        updateDom();\n        if (counter === 0) {\n          do_scroll();\n          stop_auto_scroll();\n          assert.internal(repeater === null);\n          return;\n        }\n      }\n    }\n    repeater = window.setTimeout(time_step, 1000);\n  }\n\n  function updateDom() {\n    if (!counter) {\n      hide();\n    } else {\n      show();\n    }\n  }\n\n  function scrollListener(scrollPos, { is_user_scroll }) {\n    if (is_user_scroll && document.fullscreenElement) {\n      document.exitFullscreen();\n    }\n\n    if (scrollPos === 0) {\n      start_auto_scroll();\n    } else {\n      stop_auto_scroll();\n    }\n  }\n}\n","import load_common from \"../common/load_common\";\nimport pretty_scroll_area from \"../../pretty_scroll_area\";\nimport { activate_screen_buttons } from \"./screen-buttons\";\n\nexport default on_page_load;\n\nasync function on_page_load(onPageLoad, goldpage_args) {\n  await onPageLoad(() => {\n    load_full_view();\n    load_common();\n  }, goldpage_args);\n}\n\nfunction load_full_view() {\n  pretty_scroll_area();\n\n  activate_screen_buttons();\n}\n","import assert from \"@brillout/assert\";\nimport React from \"react\";\nimport Header from \"../Header\";\nimport Footer from \"../Footer\";\nimport \"./full-view.css\";\nimport on_page_load from \"./on_page_load\";\nimport { tab_app_logo } from \"../../../tab_app_info\";\n\nexport { FullView, MorePanel, LeftSide, RightSide, FullViewLayout, config };\n\nfunction FullViewLayout(props) {\n  assert(!props.id);\n  return <div id=\"fv_full-view-layout\" {...props} />;\n}\n\nfunction FullView(props) {\n  const { children } = props;\n  return (\n    <>\n      <Header />\n\n      <div\n        className=\"pretty_scroll_area__hide_scroll_element load-area\"\n        {...props}\n      >\n        {children}\n        <div id=\"screen-buttons-wrapper\">\n          <ScreenButton id=\"donate-button\" />\n          <ScreenButton id=\"center-button\" />\n          <ScreenButton id=\"fullscreen-button\" />\n          <ScreenButton id=\"zoom-button\" />\n          <ScreenButton id=\"settings-button\" />\n          <ScreenButton id=\"thanks-button\" />\n          <ScreenButton id=\"width-setter-button\" />\n        </div>\n      </div>\n    </>\n  );\n}\n\nfunction ScreenButton({ id }) {\n  return (\n    <div id={id} click-name={id} className=\"screen-button\">\n      <div className=\"button-background glass-background\" />\n      <span className=\"button-icon\"></span>\n      <span className=\"button-text\"></span>\n    </div>\n  );\n}\n\nfunction LeftSide({ children, ...props }) {\n  assert(!props.id);\n  return (\n    <div\n      id=\"fv_left-side\"\n      {...props}\n      click-name=\"fv_left-side\"\n      style={{\n        position: \"relative\",\n      }}\n    >\n      <div id=\"fv_left-side_background\" className=\"glass-background\" />\n      {children}\n    </div>\n  );\n}\n\nfunction RightSide(props) {\n  assert(!props.id);\n  return <div id=\"fv_right-side\" {...props} />;\n}\n\nfunction MorePanel(props) {\n  const { children } = props;\n  return (\n    <div id=\"more_panel\">\n      <div id=\"more_panel_background\" className=\"glass-background\"></div>\n      {children}\n      <Footer />\n    </div>\n  );\n}\n\nfunction config({ onPageLoad, ...conf }) {\n  return {\n    renderToDom: true,\n    renderToHtml: true,\n    favicon: tab_app_logo,\n    ...conf,\n    on_page_load: (goldpage_args) => on_page_load(onPageLoad, goldpage_args),\n  };\n}\n","import assert from \"@brillout/assert\";\nimport Toastify from \"toastify-js\";\nimport \"toastify-js/src/toastify.css\";\nimport \"./toast.css\";\n\nexport { show_toast };\n\nfunction show_toast(text, { is_error = false, short_duration = false } = {}) {\n  assert(text);\n\n  const backgroundColor = is_error\n    ? \"linear-gradient(to right, #e83131, #dd4c4c)\"\n    : \"linear-gradient(to right, rgb(0, 176, 84), rgb(61, 201, 64))\";\n\n  const duration = short_duration ? 4 : 8;\n\n  Toastify({\n    duration: duration * 1000,\n    text,\n    position: \"left\",\n    backgroundColor,\n    // className: \"info\",\n  }).showToast();\n}\n","import assert from \"@brillout/assert\";\nimport { track_event } from \"./views/common/tracker\";\nimport \"./make_element_zoomable.css\";\nimport { scrollToHideScrollElement } from \"./pretty_scroll_area\";\n\nexport { make_element_zoomable };\nexport let is_zoomed = null;\nexport { on_zoom_end };\nexport { toggle_zoom };\n\n/*\nconst DEBUG = true;\n/*/\nconst DEBUG = false;\n//*/\n\n// zoomEl: target that is being zoomed into\n// scaleEl: element on which CSS Transform is applied\n// containerEl: container that the zoomed element fully fills\n// toggleEl: click element that toggles zoom state\nfunction make_element_zoomable({ containerEl, scaleEl, zoomEl, toggleEl }) {\n  assert(containerEl && scaleEl && zoomEl);\n  toggleEl = toggleEl || zoomEl;\n\n  DEBUG && console.log(\"[zoom] setup\", { zoomEl, scaleEl, containerEl });\n  if (DEBUG && window.location.hostname === \"localhost\") {\n    // Show cursor position\n    document.onmousemove = function (e) {\n      var x = e.pageX;\n      var y = e.pageY;\n      e.target.title = \"X is \" + x + \" and Y is \" + y;\n    };\n  }\n\n  scaleEl.classList.add(\"zooming__scaler\");\n  containerEl.classList.add(\"zooming__overflow-container\");\n  zoomEl.classList.add(\"zooming__zoomable-element\");\n\n  scaleEl.addEventListener(\n    \"transitionstart\",\n    (ev) => {\n      ev.propertyName === \"transform\" && on_transition_start();\n    },\n    { passive: true }\n  );\n  scaleEl.addEventListener(\n    \"transitionend\",\n    (ev) => {\n      ev.propertyName === \"transform\" && on_transition_end();\n    },\n    { passive: true }\n  );\n\n  toggleEl.addEventListener(\"click\", on_click, { passive: true });\n  window.addEventListener(\"resize\", on_resize, { passive: true });\n\n  assert(is_zoomed === null, \"multiple zoomable elements are not supported.\");\n  is_zoomed = false;\n\n  _toggle_zoom = toggle_zoom;\n\n  return;\n\n  function set_zoom() {\n    if (is_zoomed === true) {\n      zoomIn({ zoomEl, scaleEl, containerEl });\n    } else {\n      zoomOut({ scaleEl, containerEl });\n    }\n  }\n\n  function toggle_zoom({ auto_scroll = false } = {}) {\n    on_transition_start();\n\n    is_zoomed = !is_zoomed;\n\n    track_event({ name: is_zoomed ? \"zoom_in\" : \"zoom_out\" });\n\n    if (auto_scroll && is_zoomed) {\n      scrollToHideScrollElement();\n    }\n\n    set_zoom();\n  }\n\n  function on_click() {\n    toggle_zoom({ auto_scroll: true });\n  }\n\n  var last_size;\n  function on_resize() {\n    last_size = last_size || { x: null, y: null };\n    const size = { x: window.innerWidth, y: window.innerHeight };\n    if (last_size.x === size.x && last_size.y === size.y) {\n      return;\n    }\n    last_size = size;\n    set_zoom();\n  }\n\n  function on_transition_start() {\n    containerEl.classList.add(\"zoom-transition\");\n  }\n  function on_transition_end() {\n    containerEl.classList.remove(\"zoom-transition\");\n    call_zoom_state_listeners();\n  }\n}\n\nlet _toggle_zoom;\nfunction toggle_zoom() {\n  _toggle_zoom();\n}\n\nconst on_zoom_end_listeners = [];\nfunction on_zoom_end(listener) {\n  on_zoom_end_listeners.push(listener);\n}\nlet last_state;\nfunction call_zoom_state_listeners() {\n  if (last_state === is_zoomed) return;\n  last_state = is_zoomed;\n  if (is_zoomed) {\n    on_zoom_end_listeners.forEach((listener) => {\n      listener();\n    });\n  }\n}\n\nfunction zoomIn({ zoomEl, scaleEl, containerEl }) {\n  const { height: zoom_el_height, width: zoom_el_width } = getElementSizes(\n    zoomEl\n  );\n  const { height: container_height, width: container_width } = getElementSizes(\n    containerEl\n  );\n  const log_data = {\n    zoom_el_width,\n    zoom_el_height,\n    zoomEl,\n    container_width,\n    container_height,\n    containerEl,\n  };\n  assert(\n    zoom_el_height && zoom_el_width && container_height && container_width,\n    \"[zoom-problem]\",\n    log_data\n  );\n  DEBUG && console.log(\"[zoom]\", log_data);\n\n  const scale_el_pos__absolute = getPosition(scaleEl);\n  const zoom_el_pos__absolute = getPosition(zoomEl);\n  const zoom_el_pos__relative = {\n    x: zoom_el_pos__absolute.x - scale_el_pos__absolute.x,\n    y: zoom_el_pos__absolute.y - scale_el_pos__absolute.y,\n  };\n  const zoom_el_pos = zoom_el_pos__relative;\n  DEBUG &&\n    console.log(\n      \"[zoom]\",\n      JSON.stringify({\n        zoom_el_pos__relative,\n        zoom_el_pos__absolute,\n        scale_el_pos__absolute,\n      })\n    );\n\n  const scale = Math.min(\n    container_height / zoom_el_height,\n    container_width / zoom_el_width\n  );\n  DEBUG && console.log(\"[zoom]\", JSON.stringify({ scale }));\n\n  const screen_center = [container_width / 2, container_height / 2];\n  const zoom_el_center = [\n    zoom_el_width / 2 + zoom_el_pos.x,\n    zoom_el_height / 2 + zoom_el_pos.y,\n  ];\n  const translation = [\n    screen_center[0] - zoom_el_center[0],\n    screen_center[1] - zoom_el_center[1],\n  ];\n  DEBUG &&\n    console.log(\n      \"[zoom]\",\n      JSON.stringify({ screen_center, zoom_el_center, translation })\n    );\n\n  scaleEl.style.setProperty(\"--scale\", scale);\n  scaleEl.style.setProperty(\"--zoom-center-x\", zoom_el_center[0] + \"px\");\n  scaleEl.style.setProperty(\"--zoom-center-y\", zoom_el_center[1] + \"px\");\n  scaleEl.style.setProperty(\"--translate-x\", translation[0] + \"px\");\n  scaleEl.style.setProperty(\"--translate-y\", translation[1] + \"px\");\n  document.documentElement.classList.add(\"zoomed-state\");\n  /* Playground: http://jsfiddle.net/2sqprjot/ */\n}\n\nfunction zoomOut({ scaleEl, containerEl }) {\n  document.documentElement.classList.remove(\"zoomed-state\");\n}\n\n// Old code\n//  - Shortcut keybinding\n//  - #fullscreen URL hash\n\n/*\n  var fullscreen_toggle;\n  var hashListener;\n  //{{{\n  (function()\n  {\n    var FULLSCREEN_HASH = 'fullscreen';\n\n    function isFullscreen(){return location.hash==='#'+FULLSCREEN_HASH}\n    el.unfullscreen=function(){if(isFullscreen()) location.hash=''};\n\n    fullscreen_toggle=function()\n    //{{{\n    {\n      location.hash=isFullscreen()?'':FULLSCREEN_HASH;\n    //dom_fullscreen_toggle();\n    };\n    //}}}\n\n    (function(){\n      var isFs;\n      var last_isFs;\n      hashListener=function(){\n        ml.reqFrame(function(){\n          if(!last_isFs || last_isFs!=isFs) {\n          //dom_fullscreen_toggle();\n            last_isFs=isFs;\n          }\n          if(isFullscreen()) {\n            fsFcts[0]();\n            isFs=true;\n          }\n          else {\n            //if(location.hash) location.hash='#';\n            fsFcts[1]();\n            isFs=false;\n          }\n        });\n      }\n    })();\n  })();\n  //}}}\n\n  el.addEventListener('click',fullscreen_toggle,false);\n  if(keybinding) window.addEventListener('keydown',function(ev)\n  //{{{\n  {\n    ev = ev || window.event;\n    if(ml.controlKeyPressed(ev)) return;\n    var targetType = ml.getEventSource(ev).type;\n    if(targetType==='text' || targetType==='url') return;\n    if(ml.getChar(ev)===keybinding) fullscreen_toggle();\n  },false);\n  //}}}\n\n  hashListener();\n  ml.addHashListener(hashListener);\n  window.addEventListener('resize',function() { setTimeout(hashListener,1); },false);\n  return hashListener;\n  */\n\nfunction getSize(el, styleProp) {\n  const computed_style = get_computed_style(el, styleProp);\n  return parseInt(computed_style, 10) || 0;\n}\n\nfunction get_computed_style(el, styleProp) {\n  return document.defaultView\n    .getComputedStyle(el, null)\n    .getPropertyValue(styleProp);\n}\n\nfunction getElementSizes(el) {\n  let height = getSize(el, \"height\");\n  let width = getSize(el, \"width\");\n\n  const box_sizing = get_computed_style(el, \"box-sizing\");\n  if (box_sizing !== \"border-box\") {\n    height += getOuterSize([\"top\", \"bottom\"]);\n    width += getOuterSize([\"left\", \"right\"]);\n  }\n\n  return { height, width };\n\n  function getOuterSize(d) {\n    return d\n      .map(function (di) {\n        const paddingSize = getSize(el, \"padding-\" + di);\n        const borderSize = getSize(el, \"border-\" + di);\n        return paddingSize + borderSize;\n      })\n      .reduce(function (i1, i2) {\n        return i1 + i2;\n      });\n  }\n}\n\nfunction getPosition(el) {\n  let left = 0;\n  let top = 0;\n  let current_el = el;\n  do {\n    left += current_el.offsetLeft;\n    top += current_el.offsetTop;\n  } while ((current_el = current_el.offsetParent));\n  return { x: left, y: top };\n}\n"],"sourceRoot":""}